# 功能说明

## 1. 功能目标
本系统用于短剧内容生产管理，支持从项目创建到角色/场景维护，再到剧集与分镜生成、素材与音频生成的完整流程。

## 2. 功能模块

### 2.1 项目管理
- 创建项目（名称、简介、总集数等）
- 查看项目列表与状态
- 进入项目详情进行后续制作

主要页面：
- `src/app/projects/page.tsx`
- `src/app/projects/new/page.tsx`
- `src/app/projects/[id]/page.tsx`

### 2.2 角色管理
- 新增/编辑/删除角色
- 维护角色描述、形象信息
- 上传或维护角色多角度图片

主要页面与接口：
- 页面：`src/app/projects/[id]/characters/page.tsx`
- API：`/api/projects/[projectId]/characters`、`/api/characters/[id]`、`/api/characters/[id]/images`

### 2.3 场景管理
- 新增/编辑/删除场景
- 维护场景地点、时间段、背景信息

主要页面与接口：
- 页面：`src/app/projects/[id]/scenes/page.tsx`
- API：`/api/projects/[projectId]/scenes`、`/api/scenes/[id]`

### 2.4 剧集管理
- 按项目管理剧集
- 编辑剧集标题、梗概、对白文本
- 查看单集详情并进入生成流程

主要页面与接口：
- 页面：`src/app/projects/[id]/episodes/page.tsx`、`src/app/projects/[id]/episodes/[episodeId]/page.tsx`
- API：`/api/projects/[projectId]/episodes`、`/api/episodes/[id]`

### 2.5 分镜生成与管理
- 根据对白、角色、场景生成分镜草案
- 保存分镜镜头类型、描述、提示词与关联角色/场景

主要接口：
- `/api/episodes/[id]/shots`
- `/api/shots/[id]`

### 2.6 AI 文本能力
- 自动生成大纲
- 自动生成角色设定
- 自动生成场景设定
- 自动生成对白与分镜建议

实现入口：
- `src/lib/ai/orchestrator.ts`

### 2.7 TTS 生成
- 提供文本转语音能力，用于分镜或对白音频生成

主要接口：
- `/api/generation/tts`

### 2.8 系统设置
- 项目级配置维护
- 全局设置入口

主要页面：
- `src/app/projects/[id]/settings/page.tsx`
- `src/app/settings/page.tsx`

## 3. 典型业务流程
1. 创建项目
2. 配置角色与场景
3. 创建剧集并完善大纲/对白
4. 生成分镜并调整
5. 生成音频与后续视频资产
6. 汇总产出并归档

## 4. 状态与结果
- 每个对象（项目/剧集/分镜/任务）有明确状态字段，便于前端展示与流程控制
- 生成结果（图片、音频、视频路径）写回数据库字段，支持追溯和复用
